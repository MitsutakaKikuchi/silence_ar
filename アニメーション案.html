<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1, user-scalable=no'>
    
    <title>æ²ˆé»™ã®è§£å‰–å›³è­œ AR</title>
    <meta name="description" content="ä¸å¯è¦–ã®æ„›ã«é–¢ã™ã‚‹ç©ºé–“çš„è€ƒå¯Ÿ â€”â€” ARã§ä½“é¨“ã™ã‚‹ã€è¨€ãˆãªã‹ã£ãŸè¨€è‘‰ã®åº­ã€‚">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="æ²ˆé»™ã®è§£å‰–å›³è­œ AR">
    <meta property="og:description" content="ä¸å¯è¦–ã®æ„›ã«é–¢ã™ã‚‹ç©ºé–“çš„è€ƒå¯Ÿã€‚ARã§ä½“é¨“ã™ã‚‹ã€è¨€ãˆãªã‹ã£ãŸè¨€è‘‰ã®åº­ã€‚">
    <meta property="og:type" content="website">
    <meta property="og:image" content="./images/layerB.jpg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3Cfilter id='glow'%3E%3CfeGaussianBlur stdDeviation='4' result='coloredBlur'/%3E%3CfeMerge%3E%3CfeMergeNode in='coloredBlur'/%3E%3CfeMergeNode in='SourceGraphic'/%3E%3C/feMerge%3E%3C/filter%3E%3C/defs%3E%3Ccircle cx='50' cy='50' r='45' stroke='white' stroke-width='2' fill='none' opacity='0.5' filter='url(%23glow)'/%3E%3Ccircle cx='50' cy='50' r='5' fill='white' filter='url(%23glow)'/%3E%3Cpath d='M50 5 Q40 50 50 95 Q60 50 50 5' stroke='white' stroke-width='1' fill='none' opacity='0.3'/%3E%3C/svg%3E">

    <!-- A-Frame ã¨ MindAR -->
    <link rel="preconnect" href="https://aframe.io" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preload" href="https://aframe.io/releases/1.5.0/aframe.min.js" as="script">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js" as="script">
    <link rel="preload" href="./targets.mind" as="fetch" crossorigin>
    <script src='https://aframe.io/releases/1.5.0/aframe.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js'></script>
    <style>
        :root {
            /* ã‚ã³ã•ã³èª¿æ•´ï¼šãƒã‚ªãƒ³ã‚°ãƒªãƒ¼ãƒ³ã‚’è‹”è‰²ãƒ»å¤ã³ãŸéŠ…è‰²ã«å¤‰æ›´ */
            --accent-moss: rgba(120, 140, 100, 0.85);
            --accent-copper: rgba(140, 115, 95, 0.7);
            --accent-dim: rgba(120, 140, 100, 0.25);
            --text-primary: rgba(255, 255, 255, 0.88);
            --text-secondary: rgba(255, 255, 255, 0.48);
            --bg-dark: #0a0a0a;
            
            /* ã‚ã³ã•ã³: ãƒ†ã‚¯ã‚¹ãƒãƒ£ãƒã‚¤ã‚ºç”¨ */
            --paper-texture: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" /></filter><rect width="200" height="200" filter="url(%23noise)" opacity="0.05"/></svg>');
        }
        
        body { 
            margin: 0; 
            overflow: hidden; 
            font-family: 'Yu Mincho', 'Hiragino Mincho ProN', 'serif';
            touch-action: none;
            /* ã‚ã³ã•ã³: å’Œç´™ã®ã‚ˆã†ãªãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’å…¨ä½“ã«è¿½åŠ  */
            background-image: var(--paper-texture);
            background-blend-mode: multiply;
        }
        
        /* ========================================
           ç’°å¢ƒãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ§ãˆã‚ã«æ”¹è‰¯ï¼‰
           ======================================== */
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 500;
            /* ã‚ã³ã•ã³: ä¸é€æ˜åº¦ã‚’ä¸‹ã’ã‚‹ */
            opacity: 0.6;
        }
        
        /* ========================================
           ã‚¿ãƒƒãƒãƒªãƒƒãƒ—ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆï¼ˆç°¡ç´ åŒ–ï¼‰
           ======================================== */
        #ripple-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 550;
            overflow: hidden;
        }
        
        .touch-ripple {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: transparent;
            /* ã‚ã³ã•ã³: è‹”è‰²ã«å¤‰æ›´ã€ä¸è¦å‰‡ãªè¼ªéƒ­ */
            border: 1px solid var(--accent-moss);
            transform: translate(-50%, -50%) scale(0);
            animation: rippleExpand 2.5s cubic-bezier(0.4, 0, 0.6, 1) forwards;
            pointer-events: none;
            /* ã‚ã³ã•ã³: ã¼ã‹ã—ã‚’è¿½åŠ ã—ã¦æŸ”ã‚‰ã‹ã */
            filter: blur(0.5px);
        }
        
        /* å†…å´ã®ãƒªãƒƒãƒ—ãƒ«ã‚’å‰Šé™¤ï¼ˆç°¡ç´ åŒ–ï¼‰ */
        .touch-ripple::before,
        .touch-ripple::after {
            display: none;
        }
        
        @keyframes rippleExpand {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0.8;
            }
            100% {
                transform: translate(-50%, -50%) scale(6);
                opacity: 0;
            }
        }
        
        /* ========================================
           ç’°å¢ƒã‚¨ãƒ•ã‚§ã‚¯ãƒˆï¼ˆã‚ˆã‚Šé™çš„ã§æ§ãˆã‚ã«ï¼‰
           ======================================== */
        #environment-effects {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 400;
            overflow: hidden;
        }
        
        /* ã‚ã³ã•ã³: éœ§ã‚’ã‚ˆã‚Šé™çš„ã«ã€ã‚†ã£ãã‚Šã¨ */
        .mist-layer {
            position: absolute;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            background: 
                radial-gradient(ellipse 90% 60% at 25% 75%, rgba(120, 140, 100, 0.025) 0%, transparent 50%),
                radial-gradient(ellipse 70% 50% at 75% 35%, rgba(140, 115, 95, 0.02) 0%, transparent 50%),
                radial-gradient(ellipse 100% 70% at 50% 90%, rgba(100, 120, 90, 0.03) 0%, transparent 45%);
            animation: mistDrift 40s ease-in-out infinite;
            will-change: transform;
        }
        
        @keyframes mistDrift {
            0%, 100% {
                transform: translate(0, 0);
            }
            33% {
                transform: translate(2%, -1.5%);
            }
            66% {
                transform: translate(-1.5%, 2%);
            }
        }
        
        /* ã‚ã³ã•ã³: å…‰ç·šã‚’ã‚ˆã‚ŠæŸ”ã‚‰ã‹ãã€ã»ã¨ã‚“ã©è¦‹ãˆãªã„ãƒ¬ãƒ™ãƒ«ã« */
        .light-rays {
            position: absolute;
            top: -20%;
            left: 0;
            width: 100%;
            height: 70%;
            background: 
                linear-gradient(178deg, rgba(255, 255, 255, 0.01) 0%, transparent 60%),
                linear-gradient(170deg, rgba(120, 140, 100, 0.008) 0%, transparent 50%);
            opacity: 0.4;
            animation: raysPulse 15s ease-in-out infinite;
        }
        
        @keyframes raysPulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.5; }
        }
        
        /* ========================================
           ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰é€²è¡Œã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ï¼ˆç°¡ç´ åŒ–ï¼‰
           ======================================== */
        #episode-indicator {
            position: fixed;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 1500;
            padding: 18px 10px;
            background: rgba(0, 0, 0, 0.25);
            border-radius: 25px;
            backdrop-filter: blur(8px);
            /* ã‚ã³ã•ã³: ã¼ã‹ã—ã¨å’Œç´™é¢¨ãƒ†ã‚¯ã‚¹ãƒãƒ£ */
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            background-image: var(--paper-texture);
        }
        
        .episode-seed {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            /* ã‚ã³ã•ã³: è‹”è‰²ã®æ§ãˆã‚ãªå¢ƒç•Œ */
            border: 1.5px solid rgba(120, 140, 100, 0.4);
            background: transparent;
            position: relative;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .episode-seed.unlocked {
            background: rgba(120, 140, 100, 0.3);
            border-color: var(--accent-moss);
            /* ã‚ã³ã•ã³: ã‚°ãƒ­ãƒ¼ã‚’å‰Šé™¤ */
        }
        
        .episode-seed.current {
            transform: scale(1.3);
            background: var(--accent-moss);
            /* ã‚ã³ã•ã³: è„ˆå‹•ã‚’å‰Šé™¤ */
        }
        
        .episode-seed-label {
            position: absolute;
            right: 25px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 11px;
            color: var(--text-secondary);
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease;
            /* ã‚ã³ã•ã³: è£…é£¾çš„ãªãƒ•ã‚©ãƒ³ãƒˆåŠ¹æœã‚’å‰Šé™¤ */
        }
        
        .episode-seed:hover .episode-seed-label {
            opacity: 1;
        }
        
        /* ========================================
           ã‚µã‚¦ãƒ³ãƒ‰ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ï¼ˆç°¡ç´ åŒ–ï¼‰
           ======================================== */
        #sound-control {
            position: fixed;
            bottom: 25px;
            left: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 18px;
            background: rgba(0, 0, 0, 0.25);
            border-radius: 25px;
            backdrop-filter: blur(8px);
            cursor: pointer;
            z-index: 1500;
            transition: all 0.4s ease;
            /* ã‚ã³ã•ã³: ãƒ†ã‚¯ã‚¹ãƒãƒ£è¿½åŠ  */
            background-image: var(--paper-texture);
        }
        
        #sound-control:hover {
            background: rgba(0, 0, 0, 0.35);
        }
        
        #sound-control.muted {
            opacity: 0.5;
        }
        
        #sound-control svg {
            width: 20px;
            height: 20px;
            fill: var(--accent-moss);
        }
        
        #sound-control span {
            font-size: 13px;
            color: var(--text-secondary);
            letter-spacing: 0.05em;
        }
        
        /* ========================================
           ã‚·ã‚¢ã‚¿ãƒ¼ãƒ¢ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ï¼ˆç°¡ç´ åŒ–ï¼‰
           ======================================== */
        #theater-mode-btn {
            position: fixed;
            bottom: 25px;
            right: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 18px;
            background: rgba(0, 0, 0, 0.25);
            border-radius: 25px;
            backdrop-filter: blur(8px);
            cursor: pointer;
            z-index: 1500;
            transition: all 0.4s ease;
            opacity: 0;
            pointer-events: none;
            background-image: var(--paper-texture);
        }
        
        #theater-mode-btn.visible {
            opacity: 1;
            pointer-events: auto;
        }
        
        #theater-mode-btn:hover {
            background: rgba(0, 0, 0, 0.35);
        }
        
        #theater-mode-btn svg {
            width: 20px;
            height: 20px;
            fill: var(--accent-moss);
        }
        
        #theater-mode-btn span {
            font-size: 13px;
            color: var(--text-secondary);
            letter-spacing: 0.05em;
        }
        
        /* ========================================
           æ°¸ç¶šçš„ãªãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒœã‚¿ãƒ³
           ======================================== */
        #persistent-profile-btn {
            position: fixed;
            top: 25px;
            right: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 18px;
            background: rgba(0, 0, 0, 0.25);
            border-radius: 25px;
            backdrop-filter: blur(8px);
            cursor: pointer;
            z-index: 1500;
            transition: all 0.4s ease;
            opacity: 0;
            pointer-events: none;
            background-image: var(--paper-texture);
        }
        
        #persistent-profile-btn.visible {
            opacity: 1;
            pointer-events: auto;
        }
        
        #persistent-profile-btn:hover {
            background: rgba(0, 0, 0, 0.35);
        }
        
        #persistent-profile-btn svg {
            width: 20px;
            height: 20px;
            fill: var(--accent-moss);
        }
        
        #persistent-profile-btn span {
            font-size: 13px;
            color: var(--text-secondary);
            letter-spacing: 0.05em;
        }
        
        /* ========================================
           ã‚·ã‚¢ã‚¿ãƒ¼ãƒ¢ãƒ¼ãƒ‰è©©ãƒ†ã‚­ã‚¹ãƒˆ
           ======================================== */
        #theater-poem {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.92);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 40px;
            box-sizing: border-box;
            /* ã‚ã³ã•ã³: ãƒ†ã‚¯ã‚¹ãƒãƒ£è¿½åŠ  */
            background-image: var(--paper-texture);
        }
        
        #theater-poem.active {
            display: flex;
        }
        
        .poem-text {
            max-width: 600px;
            font-size: 18px;
            line-height: 2.2;
            color: var(--text-primary);
            text-align: center;
            letter-spacing: 0.1em;
            opacity: 0;
            transform: translateY(20px);
            transition: all 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            /* ã‚ã³ã•ã³: ã‚°ãƒ­ãƒ¼ã‚„å½±ã‚’å‰Šé™¤ */
        }
        
        #theater-poem.active .poem-text {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* ========================================
           ãƒ´ã‚£ãƒãƒƒãƒˆã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤
           ======================================== */
        #vignette-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 600;
            background: radial-gradient(ellipse at center, transparent 20%, rgba(0, 0, 0, 0.4) 100%);
        }
        
        /* ========================================
           ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—
           ======================================== */
        #instruction-tooltip {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px 30px;
            background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            font-size: 15px;
            color: var(--text-primary);
            text-align: center;
            z-index: 2500;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            max-width: 80%;
            line-height: 1.8;
            letter-spacing: 0.08em;
            background-image: var(--paper-texture);
        }
        
        #instruction-tooltip.visible {
            opacity: 1;
        }
        
        /* ========================================
           ã‚«ã‚¹ã‚¿ãƒ ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢
           ======================================== */
        #custom-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 0.8s ease;
            background-image: var(--paper-texture);
        }
        
        #custom-loading.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        /* ã‚ã³ã•ã³: ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç°¡ç´ åŒ– */
        .loading-garden {
            display: flex;
            gap: 15px;
            margin-bottom: 35px;
        }
        
        .loading-garden .circle {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--accent-moss);
            opacity: 0.3;
            animation: breathe 3s ease-in-out infinite;
        }
        
        .loading-garden .circle:nth-child(1) { animation-delay: 0s; }
        .loading-garden .circle:nth-child(2) { animation-delay: 0.4s; }
        .loading-garden .circle:nth-child(3) { animation-delay: 0.8s; }
        .loading-garden .circle:nth-child(4) { animation-delay: 1.2s; }
        .loading-garden .circle:nth-child(5) { animation-delay: 1.6s; }
        
        @keyframes breathe {
            0%, 100% {
                opacity: 0.3;
                transform: scale(1);
            }
            50% {
                opacity: 0.8;
                transform: scale(1.3);
            }
        }
        
        .loading-text {
            font-size: 16px;
            color: var(--text-secondary);
            letter-spacing: 0.1em;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .loading-progress-container {
            width: 280px;
            margin-bottom: 30px;
        }
        
        .loading-progress-bar {
            width: 100%;
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .loading-progress-fill {
            height: 100%;
            background: var(--accent-moss);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .loading-progress-text {
            font-size: 13px;
            color: var(--text-secondary);
            text-align: center;
            letter-spacing: 0.05em;
        }
        
        .loading-stages {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 20px;
        }
        
        .loading-stage {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.3);
            letter-spacing: 0.08em;
            transition: color 0.3s ease;
        }
        
        .loading-stage.active {
            color: var(--accent-moss);
        }
        
        .loading-stage.completed {
            color: rgba(255, 255, 255, 0.5);
        }
        
        /* ========================================
           UIã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ - ã‚¹ã‚­ãƒ£ãƒ³ã‚¬ã‚¤ãƒ‰
           ======================================== */
        #ui-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
        
        #scanning-guide-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 85%;
            max-width: 350px;
            aspect-ratio: 1;
            opacity: 0;
            transition: opacity 0.6s ease;
        }
        
        #scanning-guide-container.visible {
            opacity: 1;
        }
        
        #scanning-guide {
            position: relative;
            width: 100%;
            height: 100%;
        }
        
        /* ã‚ã³ã•ã³: ã‚¹ã‚­ãƒ£ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç°¡ç´ åŒ– */
        .scan-loading-garden {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            gap: 12px;
        }
        
        .scan-loading-garden .circle {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent-moss);
            opacity: 0.3;
            animation: breathe 3s ease-in-out infinite;
        }
        
        .scan-loading-garden .circle:nth-child(1) { animation-delay: 0s; }
        .scan-loading-garden .circle:nth-child(2) { animation-delay: 0.4s; }
        .scan-loading-garden .circle:nth-child(3) { animation-delay: 0.8s; }
        .scan-loading-garden .circle:nth-child(4) { animation-delay: 1.2s; }
        .scan-loading-garden .circle:nth-child(5) { animation-delay: 1.6s; }
        
        .scan-mist {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(120, 140, 100, 0.03) 0%, transparent 70%);
            animation: mistPulse 4s ease-in-out infinite;
        }
        
        @keyframes mistPulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }
        
        /* ã‚ã³ã•ã³: ã‚³ãƒ¼ãƒŠãƒ¼ã‚’ç°¡ç´ åŒ– */
        .corner {
            position: absolute;
            width: 40px;
            height: 40px;
            border-color: var(--accent-moss);
            opacity: 0.6;
        }
        
        .corner-tl {
            top: 0;
            left: 0;
            border-top: 2px solid;
            border-left: 2px solid;
        }
        
        .corner-tr {
            top: 0;
            right: 0;
            border-top: 2px solid;
            border-right: 2px solid;
        }
        
        .corner-bl {
            bottom: 0;
            left: 0;
            border-bottom: 2px solid;
            border-left: 2px solid;
        }
        
        .corner-br {
            bottom: 0;
            right: 0;
            border-bottom: 2px solid;
            border-right: 2px solid;
        }
        
        .scanning-guide-text {
            position: absolute;
            bottom: -50px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 14px;
            color: var(--text-secondary);
            white-space: nowrap;
            letter-spacing: 0.1em;
        }
        
        /* ã‚ã³ã•ã³: è±¡å¾´çš„ãªå…‰ã®ç²’å­ã‚’å‰Šé™¤ï¼ˆç°¡ç´ åŒ–ï¼‰ */
        .symbol-particle {
            display: none;
        }
        
        /* ========================================
           ã‚«ãƒ¼ãƒ‰UI
           ======================================== */
        .card {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            max-height: 65vh;
            background: rgba(0, 0, 0, 0.88);
            backdrop-filter: blur(20px);
            border-radius: 25px 25px 0 0;
            transform: translateY(100%);
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: auto;
            z-index: 1200;
            overflow: hidden;
            /* ã‚ã³ã•ã³: ãƒ†ã‚¯ã‚¹ãƒãƒ£è¿½åŠ  */
            background-image: var(--paper-texture);
        }
        
        .card.visible {
            transform: translateY(0);
        }
        
        .card-image-container {
            position: relative;
            width: 100%;
            height: 280px;
            overflow: hidden;
        }
        
        .card-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* ã‚ã³ã•ã³: ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è¿½åŠ ï¼ˆã‚»ãƒ”ã‚¢èª¿ã€å½©åº¦ä½ä¸‹ï¼‰ */
            filter: sepia(0.15) saturate(0.7) contrast(0.95);
        }
        
        .image-loading {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }
        
        .image-loading.hidden {
            display: none;
        }
        
        .card-loading-garden {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .card-loading-garden .circle {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent-moss);
            opacity: 0.3;
            animation: breathe 3s ease-in-out infinite;
        }
        
        .card-loading-garden .circle:nth-child(1) { animation-delay: 0s; }
        .card-loading-garden .circle:nth-child(2) { animation-delay: 0.4s; }
        .card-loading-garden .circle:nth-child(3) { animation-delay: 0.8s; }
        .card-loading-garden .circle:nth-child(4) { animation-delay: 1.2s; }
        .card-loading-garden .circle:nth-child(5) { animation-delay: 1.6s; }
        
        .card-loading-text {
            font-size: 13px;
            color: var(--text-secondary);
            letter-spacing: 0.08em;
        }
        
        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 20;
        }
        
        .close-btn:hover {
            background: rgba(0, 0, 0, 0.8);
            transform: scale(1.1);
        }
        
        .card-content {
            padding: 30px 25px 35px;
            overflow-y: auto;
            max-height: calc(65vh - 280px);
        }
        
        .card-content h2 {
            font-size: 20px;
            color: var(--text-primary);
            margin: 0 0 20px 0;
            letter-spacing: 0.08em;
            font-weight: 500;
        }
        
        .description-box {
            font-size: 15px;
            line-height: 2;
            color: var(--text-secondary);
            margin-bottom: 25px;
            letter-spacing: 0.05em;
        }
        
        .footer-note {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.3);
            text-align: center;
            letter-spacing: 0.15em;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* ========================================
           å®Œäº†ç”»é¢
           ======================================== */
        #completion-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            padding: 40px;
            box-sizing: border-box;
            background-image: var(--paper-texture);
        }
        
        #completion-screen.visible {
            display: flex;
        }
        
        .completion-content {
            max-width: 500px;
            text-align: center;
        }
        
        .completion-title {
            font-size: 26px;
            color: var(--text-primary);
            margin-bottom: 25px;
            letter-spacing: 0.12em;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s ease forwards;
        }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .completion-message {
            font-size: 15px;
            line-height: 2;
            color: var(--text-secondary);
            margin-bottom: 40px;
            letter-spacing: 0.08em;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s ease 0.3s forwards;
        }
        
        .completion-actions {
            display: flex;
            flex-direction: column;
            gap: 15px;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s ease 0.6s forwards;
        }
        
        .completion-btn {
            padding: 15px 30px;
            background: rgba(120, 140, 100, 0.2);
            border: 1px solid var(--accent-moss);
            border-radius: 25px;
            color: var(--text-primary);
            font-size: 14px;
            letter-spacing: 0.08em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .completion-btn:hover {
            background: rgba(120, 140, 100, 0.3);
            transform: translateY(-2px);
        }
        
        .completion-btn svg {
            width: 18px;
            height: 18px;
            fill: var(--accent-moss);
        }
        
        /* ========================================
           ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ¢ãƒ¼ãƒ€ãƒ«
           ======================================== */
        #profile-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.92);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 4000;
            padding: 30px;
            box-sizing: border-box;
            background-image: var(--paper-texture);
        }
        
        #profile-modal.visible {
            display: flex;
        }
        
        .profile-card {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px 35px;
            max-width: 450px;
            width: 100%;
            position: relative;
            background-image: var(--paper-texture);
        }
        
        .profile-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .profile-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .profile-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .profile-avatar {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            margin: 0 auto 20px;
            background: rgba(120, 140, 100, 0.2);
            border: 2px solid var(--accent-moss);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
        }
        
        .profile-name {
            font-size: 20px;
            color: var(--text-primary);
            margin-bottom: 8px;
            letter-spacing: 0.08em;
        }
        
        .profile-role {
            font-size: 13px;
            color: var(--text-secondary);
            letter-spacing: 0.05em;
        }
        
        .profile-bio {
            font-size: 14px;
            line-height: 1.9;
            color: var(--text-secondary);
            margin-bottom: 30px;
            text-align: center;
            letter-spacing: 0.05em;
        }
        
        .profile-links {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .profile-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 18px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            color: var(--text-primary);
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 14px;
            letter-spacing: 0.05em;
        }
        
        .profile-link:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }
        
        .profile-link svg {
            width: 20px;
            height: 20px;
            fill: var(--accent-moss);
        }
        
        /* ========================================
           ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–
           ======================================== */
        @media (max-width: 768px) {
            #episode-indicator {
                right: 10px;
                padding: 15px 8px;
                gap: 10px;
            }
            
            .episode-seed {
                width: 10px;
                height: 10px;
            }
            
            .episode-seed-label {
                font-size: 10px;
            }
            
            #sound-control,
            #theater-mode-btn,
            #persistent-profile-btn {
                padding: 10px 15px;
                font-size: 12px;
            }
            
            #sound-control svg,
            #theater-mode-btn svg,
            #persistent-profile-btn svg {
                width: 18px;
                height: 18px;
            }
            
            .card-content {
                padding: 25px 20px 30px;
            }
            
            .completion-title {
                font-size: 22px;
            }
            
            .completion-message {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <!-- å®Œäº†ç”»é¢ -->
    <div id="completion-screen">
        <div class="completion-content">
            <div class="completion-title">ã™ã¹ã¦ã®æ–­ç‰‡ãŒç¹‹ãŒã£ãŸ</div>
            <div class="completion-message">
                10ã®æ²ˆé»™ã€10ã®çœŸå®Ÿã€‚<br>
                ã‚ãªãŸã¯åº­ã®ã™ã¹ã¦ã‚’æ­©ãçµ‚ãˆãŸã€‚<br><br>
                è¨€ãˆãªã‹ã£ãŸè¨€è‘‰ãŸã¡ã¯ã€ä»Šã€ã©ã“ã¸å‘ã‹ã†ã®ã ã‚ã†ã€‚
            </div>
            <div class="completion-actions">
                <button class="completion-btn" id="replay-btn">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
                    </svg>
                    <span>ã‚‚ã†ä¸€åº¦å·¡ã‚‹</span>
                </button>
                <button class="completion-btn" id="profile-btn">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                    </svg>
                    <span>åˆ¶ä½œè€…ã«ã¤ã„ã¦</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="profile-modal">
        <div class="profile-card">
            <div class="profile-close">Ã—</div>
            <div class="profile-header">
                <div class="profile-avatar">ğŸŒ±</div>
                <div class="profile-name">Creator Name</div>
                <div class="profile-role">Digital Artist / Poet</div>
            </div>
            <div class="profile-bio">
                ä¸å¯è¦–ã®æ„Ÿæƒ…ã‚’å¯è¦–åŒ–ã™ã‚‹è©¦ã¿ã€‚<br>
                è¨€è‘‰ã«ãªã‚‰ãªã‹ã£ãŸæ€ã„ã‚’ã€ç©ºé–“ã«ç·¨ã‚€ã€‚
            </div>
            <div class="profile-links">
                <a href="#" class="profile-link" target="_blank">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                    </svg>
                    <span>Connect on Instagram</span>
                </a>
            </div>
        </div>
    </div>
    
    <!-- ç’°å¢ƒã‚¨ãƒ•ã‚§ã‚¯ãƒˆ -->
    <div id="environment-effects">
        <div class="mist-layer"></div>
        <div class="light-rays"></div>
    </div>
    
    <!-- ãƒ´ã‚£ãƒãƒƒãƒˆã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
    <div id="vignette-overlay"></div>
    
    <!-- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚­ãƒ£ãƒ³ãƒã‚¹ -->
    <canvas id="particle-canvas"></canvas>
    
    <!-- ã‚¿ãƒƒãƒãƒªãƒƒãƒ—ãƒ«ã‚³ãƒ³ãƒ†ãƒŠ -->
    <div id="ripple-container"></div>
    
    <!-- ã‚·ã‚¢ã‚¿ãƒ¼ãƒ¢ãƒ¼ãƒ‰è©©ãƒ†ã‚­ã‚¹ãƒˆ -->
    <div id="theater-poem">
        <div class="poem-text"></div>
    </div>
    
    <!-- ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰é€²è¡Œã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ -->
    <div id="episode-indicator">
        <div class="episode-seed" data-index="0">
            <span class="episode-seed-label">01 æ”¯æŸ±</span>
        </div>
        <div class="episode-seed" data-index="1">
            <span class="episode-seed-label">02 è”¦</span>
        </div>
        <div class="episode-seed" data-index="2">
            <span class="episode-seed-label">03 é›¨</span>
        </div>
        <div class="episode-seed" data-index="3">
            <span class="episode-seed-label">04 åŒ–çŸ³</span>
        </div>
        <div class="episode-seed" data-index="4">
            <span class="episode-seed-label">05 æª»</span>
        </div>
        <div class="episode-seed" data-index="5">
            <span class="episode-seed-label">06 æ¥ãæœ¨</span>
        </div>
        <div class="episode-seed" data-index="6">
            <span class="episode-seed-label">07 è¦å¡</span>
        </div>
        <div class="episode-seed" data-index="7">
            <span class="episode-seed-label">08 å‰ªå®š</span>
        </div>
        <div class="episode-seed" data-index="8">
            <span class="episode-seed-label">09 è¿·è·¯</span>
        </div>
        <div class="episode-seed" data-index="9">
            <span class="episode-seed-label">10 ç¨®</span>
        </div>
    </div>
    
    <!-- ã‚·ã‚¢ã‚¿ãƒ¼ãƒ¢ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ -->
    <div id="theater-mode-btn">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
        </svg>
        <span>æ²¡å…¥</span>
    </div>

    <!-- æ°¸ç¶šçš„ãªãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ -->
    <div id="persistent-profile-btn">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
        </svg>
        <span>åˆ¶ä½œè€…</span>
    </div>

    
    <!-- ã‚µã‚¦ãƒ³ãƒ‰ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« -->
    <div id="sound-control">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
        </svg>
        <span>ç’°å¢ƒéŸ³</span>
    </div>
    
    <!-- ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ— -->
    <div id="instruction-tooltip"></div>
    
    <!-- ã‚«ã‚¹ã‚¿ãƒ ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ -->
    <div id='custom-loading'>
        <div class='loading-garden'>
            <div class='circle'></div>
            <div class='circle'></div>
            <div class='circle'></div>
            <div class='circle'></div>
            <div class='circle'></div>
        </div>
        <div class='loading-text' id='loading-main-text'>è¨˜æ†¶ã®åº­ã¸æ¥ç¶šã—ã¦ã„ã¾ã™...</div>
        
        <div class='loading-progress-container'>
            <div class='loading-progress-bar'>
                <div class='loading-progress-fill' id='loading-progress-fill'></div>
            </div>
            <div class='loading-progress-text' id='loading-progress-text'>0%</div>
        </div>
        
        <div class='loading-stages'>
            <div class='loading-stage' id='stage-library' data-stage='library'>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåˆæœŸåŒ–</div>
            <div class='loading-stage' id='stage-targets' data-stage='targets'>èªè­˜ãƒ‡ãƒ¼ã‚¿èª­è¾¼</div>
            <div class='loading-stage' id='stage-images' data-stage='images'>æ–­ç‰‡ã®åé›†</div>
            <div class='loading-stage' id='stage-camera' data-stage='camera'>è¦–ç•Œã®ç¢ºä¿</div>
        </div>
    </div>
    
    <!-- UIã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
    <div id='ui-overlay'>
        <div id='scanning-guide-container'>
            <div id='scanning-guide'>
                <div class='scan-loading-garden'>
                    <div class='circle'></div>
                    <div class='circle'></div>
                    <div class='circle'></div>
                    <div class='circle'></div>
                    <div class='circle'></div>
                </div>
                <div class='scan-mist'></div>
                <div class='corner corner-tl'></div>
                <div class='corner corner-tr'></div>
                <div class='corner corner-bl'></div>
                <div class='corner corner-br'></div>
            </div>

            <div class='scanning-guide-text'>æ²ˆé»™ã®æ–­ç‰‡ã‚’ã€æ ã®ä¸­ã¸...</div>
        </div>

        <div class='card'>
            <div class='card-image-container'>
                <div class='image-loading' id='image-loading'>
                    <div class='card-loading-garden'>
                        <div class='circle'></div>
                        <div class='circle'></div>
                        <div class='circle'></div>
                        <div class='circle'></div>
                        <div class='circle'></div>
                    </div>
                    <div class='card-loading-text'>çœŸå®Ÿã‚’è§£å‰–ä¸­...</div>
                </div>
                <img id='ui-image' src='' alt='Episode Image'>
                <div class='close-btn'>Ã—</div>
            </div>
            
            <div class='card-content'>
                <h2 id='ui-title'>No.xx Title</h2>
                <div class='description-box' id='ui-desc'>
                    Text description...
                </div>
                <div class='footer-note'>æ²ˆé»™ã®è§£å‰–å›³è­œ</div>
            </div>
        </div>
    </div>

    <a-scene mindar-image="imageTargetSrc: ./targets.mind; autoStart: true; uiLoading: no; uiError: yes; uiScanning: no;" 
             color-space="sRGB" 
             renderer="colorManagement: true, physicallyCorrectLights" 
             vr-mode-ui="enabled: false" 
             device-orientation-permission-ui="enabled: false">
        
        <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

        <a-entity mindar-image-target="targetIndex: 0" id="target-0"></a-entity>
        <a-entity mindar-image-target="targetIndex: 1" id="target-1"></a-entity>
        <a-entity mindar-image-target="targetIndex: 2" id="target-2"></a-entity>
        <a-entity mindar-image-target="targetIndex: 3" id="target-3"></a-entity>
        <a-entity mindar-image-target="targetIndex: 4" id="target-4"></a-entity>
        <a-entity mindar-image-target="targetIndex: 5" id="target-5"></a-entity>
        <a-entity mindar-image-target="targetIndex: 6" id="target-6"></a-entity>
        <a-entity mindar-image-target="targetIndex: 7" id="target-7"></a-entity>
        <a-entity mindar-image-target="targetIndex: 8" id="target-8"></a-entity>
        <a-entity mindar-image-target="targetIndex: 9" id="target-9"></a-entity>
        
    </a-scene>

    <script>
        // ========================================
        // ã‚ã³ã•ã³ç’°å¢ƒéŸ³ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ”¹è‰¯ç‰ˆï¼‰
        // ========================================
        class WabiSabiAmbientSound {
            constructor() {
                this.audioContext = null;
                this.isPlaying = false;
                this.masterGain = null;
                this.layers = [];
                
                // ã‚ã³ã•ã³: ã‚ˆã‚Šè‡ªç„¶ã§ä¸è¦å‰‡ãªéŸ³ã®è¨­è¨ˆ
                this.soundConfig = {
                    // åŸºæœ¬å‘¨æ³¢æ•°ã‚’ä¸‹ã’ã€å€éŸ³ã‚’ä¸è¦å‰‡ã«
                    windBase: { freq: 80, variation: 30 },
                    waterDrip: { interval: 3000, variation: 2000 },
                    insectChirp: { interval: 8000, variation: 6000 },
                    woodCreak: { interval: 15000, variation: 10000 }
                };
            }
            
            async init() {
                if (!this.audioContext) {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    this.masterGain = this.audioContext.createGain();
                    this.masterGain.gain.value = 0.15; // ã‚ã³ã•ã³: éŸ³é‡ã‚’æ§ãˆã‚ã«
                    this.masterGain.connect(this.audioContext.destination);
                }
            }
            
            async start() {
                await this.init();
                if (this.isPlaying) return;
                
                this.isPlaying = true;
                this.createWindLayer();
                this.scheduleNaturalSounds();
            }
            
            // ã‚ã³ã•ã³: ã‚ˆã‚Šè‡ªç„¶ãªé¢¨ã®éŸ³ï¼ˆãƒ›ãƒ¯ã‚¤ãƒˆãƒã‚¤ã‚ºãƒ™ãƒ¼ã‚¹ï¼‰
            createWindLayer() {
                const bufferSize = this.audioContext.sampleRate * 4;
                const buffer = this.audioContext.createBuffer(1, bufferSize, this.audioContext.sampleRate);
                const data = buffer.getChannelData(0);
                
                // ä½å‘¨æ³¢ãƒã‚¤ã‚ºç”Ÿæˆ
                for (let i = 0; i < bufferSize; i++) {
                    data[i] = (Math.random() * 2 - 1) * 0.3;
                }
                
                const noise = this.audioContext.createBufferSource();
                noise.buffer = buffer;
                noise.loop = true;
                
                // ã‚ã³ã•ã³: ä¸è¦å‰‡ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
                const filter = this.audioContext.createBiquadFilter();
                filter.type = 'lowpass';
                filter.frequency.value = 200;
                filter.Q.value = 0.5;
                
                const gain = this.audioContext.createGain();
                gain.gain.value = 0.4;
                
                noise.connect(filter);
                filter.connect(gain);
                gain.connect(this.masterGain);
                
                noise.start();
                
                // ã‚ã³ã•ã³: ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å‘¨æ³¢æ•°ã‚’ã‚†ã£ãã‚Šå¤‰å‹•
                this.modulateFilter(filter);
            }
            
            modulateFilter(filter) {
                if (!this.isPlaying) return;
                
                const targetFreq = 150 + Math.random() * 100;
                const duration = 8 + Math.random() * 12;
                
                filter.frequency.linearRampToValueAtTime(
                    targetFreq,
                    this.audioContext.currentTime + duration
                );
                
                setTimeout(() => this.modulateFilter(filter), duration * 1000);
            }
            
            // ã‚ã³ã•ã³: è‡ªç„¶ç•Œã®ä¸è¦å‰‡ãªéŸ³ï¼ˆæ°´æ»´ã€è™«ã€æœ¨ã®ãã—ã¿ï¼‰
            scheduleNaturalSounds() {
                if (!this.isPlaying) return;
                
                // ãƒ©ãƒ³ãƒ€ãƒ ã«éŸ³ã‚’é¸æŠ
                const sounds = ['drip', 'chirp', 'creak'];
                const sound = sounds[Math.floor(Math.random() * sounds.length)];
                
                this.playNaturalSound(sound);
                
                // æ¬¡ã®éŸ³ã¾ã§ä¸è¦å‰‡ãªé–“éš”
                const nextInterval = 4000 + Math.random() * 8000;
                setTimeout(() => this.scheduleNaturalSounds(), nextInterval);
            }
            
            playNaturalSound(type) {
                const now = this.audioContext.currentTime;
                const osc = this.audioContext.createOscillator();
                const gain = this.audioContext.createGain();
                
                if (type === 'drip') {
                    // æ°´æ»´: çŸ­ã„é«˜éŸ³
                    osc.frequency.value = 800 + Math.random() * 400;
                    gain.gain.setValueAtTime(0.08, now);
                    gain.gain.exponentialRampToValueAtTime(0.001, now + 0.3);
                } else if (type === 'chirp') {
                    // è™«ã®éŸ³: ä¸­éŸ³åŸŸã®çŸ­ã„ãƒ‘ãƒ«ã‚¹
                    osc.frequency.value = 400 + Math.random() * 300;
                    gain.gain.setValueAtTime(0.05, now);
                    gain.gain.exponentialRampToValueAtTime(0.001, now + 0.15);
                } else if (type === 'creak') {
                    // æœ¨ã®ãã—ã¿: ä½éŸ³ã®ã†ãªã‚Š
                    osc.frequency.value = 60 + Math.random() * 80;
                    gain.gain.setValueAtTime(0.03, now);
                    gain.gain.exponentialRampToValueAtTime(0.001, now + 1.2);
                }
                
                osc.connect(gain);
                gain.connect(this.masterGain);
                
                osc.start(now);
                osc.stop(now + 1.5);
            }
            
            stop() {
                this.isPlaying = false;
                if (this.masterGain) {
                    this.masterGain.gain.linearRampToValueAtTime(
                        0,
                        this.audioContext.currentTime + 1
                    );
                }
            }
        }
        
        // ========================================
        // ã‚ã³ã•ã³ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚·ã‚¹ãƒ†ãƒ ï¼ˆç°¡ç´ åŒ–ç‰ˆï¼‰
        // ========================================
        class WabiSabiParticles {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');
                this.particles = [];
                this.maxParticles = 15; // ã‚ã³ã•ã³: æ•°ã‚’æ¸›ã‚‰ã™
                this.resize();
                
                window.addEventListener('resize', () => this.resize());
            }
            
            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }
            
            createParticle() {
                return {
                    x: Math.random() * this.canvas.width,
                    y: -20,
                    size: 2 + Math.random() * 3, // ã‚ã³ã•ã³: ã‚ˆã‚Šå°ã•ã
                    speedY: 0.3 + Math.random() * 0.4, // ã‚ã³ã•ã³: ã‚ˆã‚Šã‚†ã£ãã‚Š
                    speedX: (Math.random() - 0.5) * 0.3,
                    opacity: 0.2 + Math.random() * 0.3, // ã‚ã³ã•ã³: ã‚ˆã‚Šæ·¡ã
                    rotation: Math.random() * Math.PI * 2,
                    rotationSpeed: (Math.random() - 0.5) * 0.02
                };
            }
            
            update() {
                // ã‚ã³ã•ã³: ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«æ•°ã‚’æ§ãˆã‚ã«
                if (this.particles.length < this.maxParticles && Math.random() < 0.03) {
                    this.particles.push(this.createParticle());
                }
                
                this.particles = this.particles.filter(p => {
                    p.y += p.speedY;
                    p.x += p.speedX;
                    p.rotation += p.rotationSpeed;
                    
                    // ã‚ã³ã•ã³: ãƒ©ãƒ³ãƒ€ãƒ ãªæºã‚‰ã
                    p.speedX += (Math.random() - 0.5) * 0.05;
                    p.speedX *= 0.98;
                    
                    return p.y < this.canvas.height + 20;
                });
            }
            
            draw() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                this.particles.forEach(p => {
                    this.ctx.save();
                    this.ctx.translate(p.x, p.y);
                    this.ctx.rotate(p.rotation);
                    
                    // ã‚ã³ã•ã³: è‹”è‰²ã®æ·¡ã„ç²’å­
                    this.ctx.fillStyle = `rgba(120, 140, 100, ${p.opacity})`;
                    this.ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);
                    
                    this.ctx.restore();
                });
            }
            
            animate() {
                this.update();
                this.draw();
                requestAnimationFrame(() => this.animate());
            }
        }
        
        // ========================================
        // åˆæœŸåŒ–ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        // ========================================
        let ambientSound = null;
        let particleSystem = null;
        let isSoundEnabled = false;
        
        document.addEventListener('DOMContentLoaded', () => {
            // ç’°å¢ƒéŸ³ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–
            ambientSound = new WabiSabiAmbientSound();
            
            // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–
            const canvas = document.getElementById('particle-canvas');
            particleSystem = new WabiSabiParticles(canvas);
            particleSystem.animate();
            
            // ã‚µã‚¦ãƒ³ãƒ‰ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«
            const soundControl = document.getElementById('sound-control');
            soundControl.addEventListener('click', async () => {
                if (!isSoundEnabled) {
                    await ambientSound.start();
                    soundControl.classList.remove('muted');
                    isSoundEnabled = true;
                } else {
                    ambientSound.stop();
                    soundControl.classList.add('muted');
                    isSoundEnabled = false;
                }
            });
            
            // ã‚ã³ã•ã³: ã‚¿ãƒƒãƒãƒªãƒƒãƒ—ãƒ«ã‚’ç°¡ç´ åŒ–
            const rippleContainer = document.getElementById('ripple-container');
            document.addEventListener('touchstart', (e) => {
                Array.from(e.touches).forEach(touch => {
                    const ripple = document.createElement('div');
                    ripple.className = 'touch-ripple';
                    ripple.style.left = touch.clientX + 'px';
                    ripple.style.top = touch.clientY + 'px';
                    rippleContainer.appendChild(ripple);
                    
                    setTimeout(() => ripple.remove(), 2500);
                });
            });
        });
        
        // æ³¨: å…ƒã®JavaScriptã®æ®‹ã‚Šã®éƒ¨åˆ†ï¼ˆMindARé–¢é€£ãªã©ï¼‰ã¯
        // ãã®ã¾ã¾ç¶™ç¶šã—ã¦ä½¿ç”¨ã—ã¾ã™
    </script>
</body>
</html>